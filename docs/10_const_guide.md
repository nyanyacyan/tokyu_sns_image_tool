# const定義ルール（ドキュメント案）

## 【目的】

このドキュメントは、Seleniumやデータ処理などにおいて使用される定数（ID, ボタン名, カラム名など）を一元管理するためのルールです。
クラス + Enum形式で定義し、責務ごとにファイルを分けて保守性と再利用性を高めることを目的とします。


<br>



## 【constファイルの利用目的】

定数（const）を使うことで、次のようなメリットがあります：

### ① **値の変更ミスを防げる（安全性）**
- 文字列をコード中に直接書くと、**タイプミスや誤上書きの原因**になります。
- Enumなどで定義しておけば、**意図しない書き換えを防止**できます。

### ② **意味が明確になる（可読性）**
- 例えば `By.ID, "login-btn"` よりも
　`LoginElements.TOKYU.value["LOGIN_BTN"]` のように使った方が、**「何の要素か」が明確**になります。

### ③ **複数箇所の修正を一箇所にまとめられる（保守性）**
- もしボタンのIDが変更された場合、**定数定義だけを直せば他は触らなくて済む**ようになります。
- **プロジェクト全体で使い回せる**ので、将来的な変更にも強くなります。

### ④ **メンバー間での表記ゆれを防げる（統一性）**
- `login_id`, `loginId`, `LOGIN_ID` などの**バラバラな書き方を防止**できます。
- チームで共通の書き方があることで、**可読性とチームの連携が向上**します。

### ⑤ **動的値と固定値の責務が分かれる**
- ユーザー名や日時など「変わる値」は別設計にし、「変わらない名前・構造」だけをconstに分離できるため、**設計の見通しがよくなります。**


<br>

---

### こんな場面で活きる！

- Webサイトの仕様変更時 → セレクタ名が変わっても定数1か所を直すだけで済む
- 共同開発 → 他人のコードを読んだときに `CLICK_BTN_A` などの意味がすぐ分かる
- コードレビュー → 「この定数どこにある？」がすぐ見つかるようになる


<br>

## 定義ルール
### ● 基本構文
```python
from enum import Enum

class LoginElements(Enum):
    TOKYU = {
        "ID": "input-id",
        "PASS": "input-password",
        "LOGIN_BTN": "login-button"
    }
```

- Enumで定義 → 書き換え防止、値の安全な参照
- 値は dict 形式で保持（多要素まとめて管理）
- クラス名は 対象画面 or 機能名 + Elements で命名


<br>



## 【ファイル分割ルール】

定数が多くなってきた場合や、用途ごとに役割が異なる場合は、責務ごとにファイルを分けて管理します。
ファイル名はすべて `snake_case` で統一してください。


<br>


---

### 用途別のファイル名ルール

| 用途                     | ファイル名             | 内容の例 |
|--------------------------|------------------------|----------|
| 入力・クリック要素   | `const_element.py`     | Seleniumなどで使用するIDやクラス名など |
| テーブル列・データ構造   | `const_table.py`       | SQLite・スプレッドシートなどのカラム名 |
| プロンプト・メッセージ系 | `prompt.py`            | ChatGPT連携のプロンプトや定型文 |
| エラーメッセージ         | `const_error.py`       | エラー内容の文字列など |
| タグ・カテゴリ分類      | `const_tag.py`         | 投稿分類やUIラベルの一覧など |


<br>


---

### 命名・責務に関するルール

- クラス名は「機能名 + Elements」など、**目的がわかる名前**にする
- 1ファイルに複数クラスを定義する場合は、**同一機能に関するもののみ**
- 定義する値は、**UI上の文字列やID・カラム名などの“変わらないもの”だけ**に限定する
- 異なる責務が混ざっている場合は、**新しいファイルに切り出すことを検討する**


<br>

---
<br>


## 利用する際の定義方法

利用箇所では以下のように使用：

```python
from flow.const.const_element import LoginElements

login_config = LoginElements.TOKYU.value
login_id = login_config["ID"]
```

値を明確にすることでより修正対応などの際の可読性を向上させる。

<br>



## チェックリスト
- [ ] 値を直接コード内にベタ書きしていないか？
- [ ] クラス名は機能ごとに整理されているか？（LoginElements、ClickElementsなど）
- [ ] Enumを使って再代入されないようにしているか？
- [ ] キーの表記揺れ（例："ID"と"id"）がないか？
- [ ] 重複している定義を見直したか？
- [ ] 新しい用途があれば、ファイルを分けたか？（例：const_table.py）
- [ ] value に dict を使う場合、中身のキー名もスネークケースで統一しているか？
